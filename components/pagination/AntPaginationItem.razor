@namespace AntBlazor
@inherits AntDomComponentBase

<li class="@ClassMapper.Class" style="@Style" @ref="Ref" title="@_title" id="@Id" @onclick="clickItem" @attributes="@Attributes">
    @if (ItemRender != null)
    {
        @ItemRender(new PaginationItemRenderContext { Implicit = Type, Page = Index })
    }
    else
    {
        @renderItemTemplate(new PaginationItemRenderContext() { Implicit = Type, Page = Index })
    }
</li>

@code {

    /// <summary>
    /// 'page' | 'prev' | 'next' | 'prev_5' | 'next_5'
    /// </summary>
    [Parameter]
    public string Type { get; set; }

    [Parameter]
    public bool Disabled { get; set; }

    [Parameter]
    public bool Active { get; set; }

    [Parameter]
    public int Index { get; set; }

    [Parameter]
    public RenderFragment<PaginationItemRenderContext> ItemRender { get; set; }

    [Parameter]
    public EventCallback<int> DiffIndex { get; set; }

    [Parameter]
    public EventCallback<int> GotoIndex { get; set; }

    protected RenderFragment<PaginationItemRenderContext> renderItemTemplate = (context) =>
        @<Template>
            @{
            var type = context.Implicit;
            var page = context.Page;
            }

            @if (type == "page")
            {
                <a>@(page)</a>

            }
            else
            {
                <a class="ant-pagination-item-link" [ngSwitch]="type">
                    @switch (type)
                    {
                        case "prev":
                            <AntIcon type="left"></AntIcon>
                            break;
                        case "next":
                            <AntIcon type="right"></AntIcon>
                            break;
                        default:
                            <div class="ant-pagination-item-container">
                                @if (type == "prev_5")
                                {
                                    <AntIcon type="double-left" class="ant-pagination-item-link-icon"></AntIcon>
                                }
                                else if (type == "next_5")
                                {
                                    <AntIcon type="double-right" class="ant-pagination-item-link-icon"></AntIcon>
                                }
                                <span class="ant-pagination-item-ellipsis">•••</span>
                            </div>
                            break;
                    }
                </a>
            }
        </Template>;

    private string _title { get; set; }

    protected void SetClassMap()
    {
        var cls = "ant-pagination";

        ClassMapper
            .If($"{cls}-prev", () => Type == "prev")
            .If($"{cls}-next", () => Type == "next")
            .If($"{cls}-item", () => Type == "page")
            .If($"{cls}-jump-prev", () => Type == "prev_5")
            .If($"{cls}-jump-prev-custom-icon", () => Type == "prev_5")
            .If($"{cls}-jump-next", () => Type == "next_5")
            .If($"{cls}-jump-next-custom-icon", () => Type == "next_5")
            .If($"{cls}-disabled", () => Disabled)
            .If($"{cls}-item-active", () => Active)
            ;
    }

    protected void clickItem(MouseEventArgs args)
    {

    }
}
